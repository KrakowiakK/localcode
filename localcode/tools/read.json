{
  "name": "read",
  "aliases": ["read_file", "open_file"],
  "category": "read",
  "description": "Read file with line numbers (default 2000 lines, 250KB max). With diff=true: shows changes since last read, or 'no changes' if unchanged, or full file if never read.\n\nREQUIRED BEFORE:\n- {{tool:edit}}/{{tool:apply_patch}} on a file. If you skip {{tool:read}}, those tools will error:\n  - {{tool:edit}}: \"error: must read <file> before editing (use {{tool:read}} tool first)\"\n  - {{tool:apply_patch}}: \"error: must read <file> before patching (use {{tool:read}} tool first)\"\n- Re-read the target file immediately before {{tool:edit}}/{{tool:apply_patch}} to ensure context is current.\n\nPATH RULES:\n- If the path is uncertain, call {{tool:ls}}/{{tool:glob}} first.\n- Use output paths verbatim; do not invent paths.\n\nIF FILE NOT FOUND:\n- Use {{tool:ls}}/{{tool:glob}} to locate the correct path, then retry {{tool:read}}.\n\nExamples:\n- {{tool:read}}({\"path\": \"file.js\"}) → full file with line numbers\n- {{tool:read}}({\"path\": \"file.js\", \"offset\": 100, \"limit\": 50}) → lines 100-150\n- {{tool:read}}({\"path\": \"file.js\", \"line_start\": 100, \"line_end\": 150}) → lines 100-150\n- {{tool:read}}({\"path\": \"file.js\", \"diff\": true}) → unified diff since last read",
  "feedback": {
    "read_is_directory": "FORMAT ERROR: {{tool:read}} failed: path is a directory.\nACTION: Use {{tool:ls}}(path) to list files, then call {{tool:read}} on a file path.",
    "read_file_not_found": "FORMAT ERROR: {{tool:read}} failed: file not found.\nACTION: Use {{tool:ls}}(path) or {{tool:glob}}(pat, path) to locate the correct file, then call {{tool:read}} with the valid path."
  },
  "additionalProperties": false,
  "parameters": {
    "path": "string",
    "offset": {
      "type": "integer",
      "optional": true,
      "minimum": 0
    },
    "limit": {
      "type": "integer",
      "optional": true,
      "minimum": 1
    },
    "line_start": {
      "type": "integer",
      "optional": true,
      "minimum": 1
    },
    "line_end": {
      "type": "integer",
      "optional": true,
      "minimum": 1
    },
    "diff": {
      "type": "boolean",
      "optional": true,
      "default": false
    }
  },
  "handler": "read"
}
