{
  "name": "edit",
  "aliases": ["replace_in_file", "edit_file"],
  "category": "write",
  "description": "Replace exact string in file. CRITICAL: Copy 'old' VERBATIM from {{tool:read}} output.\n\nBEFORE USING:\n1. {{tool:read}} the file first (required).\n2. COPY 'old' exactly from read output (including whitespace/indentation).\n3. 'old' must be UNIQUE in file, or use all=true.\n4. If edit fails: re-read file, COPY exact substring, do NOT guess.\n\nPREFER {{tool:write}} when:\n- File is small (<50 lines)\n- Making many changes to same file\n- Replacing most of file content\n\nExamples:\n- {{tool:edit}}({\"path\": \"app.js\", \"old\": \"const x = 1;\", \"new\": \"const x = 2;\"})\n- {{tool:edit}}({\"path\": \"app.js\", \"old\": \"TODO\", \"new\": \"DONE\", \"all\": true})\n\nReturns: ok: N replacement(s), +additions -removals",
  "feedback": {
    "must_read_before_editing": "FORMAT ERROR: {{tool:edit}} requires the file to be read first.\nACTION: Call {{tool:read}}(path) for {{target}} (use {{tool:read}}, NOT {{tool:search}}), then retry {{tool:edit}}.",
    "old_string_not_found": "ERROR: 'old' string not found in file. Common causes:\n1. Whitespace mismatch (tabs vs spaces, trailing spaces)\n2. String was modified since last read\n3. Guessing content instead of copying from read output\nACTION: Call {{tool:read}}({{target}}), then COPY the exact substring. For small files, use {{tool:write}} instead.",
    "old_string_not_unique": "FORMAT ERROR: {{tool:edit}} failed: old_string is not unique.\nACTION: Call {{tool:read}}(path) for {{target}} (use {{tool:read}}, NOT {{tool:search}}), then retry with an exact unique substring, OR set all=true if you intend to replace all occurrences.",
    "old_equals_new": "ERROR: {{tool:edit}} called with 'old' identical to 'new' - no change would occur.\nThis usually means you want to MODIFY the code, not copy it unchanged.\nACTION:\n1. Re-read the file with {{tool:read}}({{target}})\n2. Identify the EXACT text you want to CHANGE (old)\n3. Write the MODIFIED version (new) - it must be DIFFERENT from old\n4. If the file already has correct content, the task may be complete - verify and move on.\nTIP: For small files, consider using {{tool:write}} to rewrite the entire file."
  },
  "additionalProperties": false,
  "parameters": {
    "path": "string",
    "old": "string",
    "new": "string",
    "all": {
      "type": "boolean",
      "optional": true,
      "default": false
    }
  },
  "handler": "edit"
}
